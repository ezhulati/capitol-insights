import{j as e}from"./motion-55a23653.js";import{r as t}from"./react-c3d7d9ee.js";import{X as s,J as n,c as a,p as r,F as i}from"./ui-d40fa30f.js";const l=({title:l,description:o,documentUrl:c,documentTitle:d,onClose:m})=>{const[u,h]=t.useState({name:"",email:"",industry:"","csrf-token":""});t.useEffect((()=>{(async()=>{try{const e=await async function(){try{const e=await fetch("/.netlify/functions/get-csrf-token");if(!e.ok)throw new Error(`Failed to fetch CSRF token: ${e.status} ${e.statusText}`);return(await e.json()).token}catch(e){throw e}}();h((t=>({...t,"csrf-token":e})))}catch(e){}})()}),[]);const[p,x]=t.useState({name:"",email:"",industry:""}),[y,f]=t.useState(!1),[v,b]=t.useState(!1),j=e=>{const{name:t,value:s}=e.target;h((e=>({...e,[t]:s}))),p[t]&&x((e=>({...e,[t]:""})))};return e.jsx("div",{className:"fixed inset-0 bg-secondary-900/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-secondary-900",children:l}),e.jsx("button",{onClick:m,className:"text-secondary-500 hover:text-secondary-700 transition-colors","aria-label":"Close",children:e.jsx(s,{size:20})})]}),v?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(i,{size:24,className:"text-primary-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-secondary-900 mb-2",children:"Thank You!"}),e.jsxs("p",{className:"text-secondary-700 mb-6",children:["The document should open in a new tab. If it doesn't,"," ",e.jsx("a",{href:c,className:"text-primary-600 hover:text-primary-700 font-medium",target:"_blank",rel:"noopener noreferrer",children:"click here"}),"."]}),e.jsx("button",{onClick:m,className:"text-primary-600 hover:text-primary-700 font-medium",children:"Close this window"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-secondary-700 mb-6",children:o}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{let e=!0;const t={...p};return u.name.trim()||(t.name="Name is required",e=!1),u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)||(t.email="Please enter a valid email address",e=!1):(t.email="Email is required",e=!1),u.industry.trim()||(t.industry="Industry is required",e=!1),x(t),e})())return;f(!0);try{const e=document.createElement("a");e.href=c,e.target="_blank",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(h){}const t=document.createElement("form");t.method="POST",t.action=`/download-success.html?doc=${encodeURIComponent(c)}`,t.setAttribute("data-netlify","true"),t.setAttribute("name","download-form"),t.style.display="none";const s=document.createElement("input");s.name="name",s.value=u.name,t.appendChild(s);const n=document.createElement("input");n.name="email",n.value=u.email,t.appendChild(n);const a=document.createElement("input");if(a.name="industry",a.value=u.industry,t.appendChild(a),u["csrf-token"]){const e=document.createElement("input");e.type="hidden",e.name="csrf-token",e.value=u["csrf-token"],t.appendChild(e)}const r=document.createElement("input");r.name="document",r.value=d,t.appendChild(r);const i=document.createElement("input");i.type="hidden",i.name="form-name",i.value="download-form",t.appendChild(i);const l=document.createElement("input");l.type="hidden",l.name="subject",l.value=`Document Viewed: ${d}`,t.appendChild(l);const o=document.createElement("input");o.type="hidden",o.name="message";const m=(new Date).toLocaleString();o.value=`\nDocument: ${d}\nViewed: ${m}\nURL: ${c}\n\nThis user has viewed the above document. Please follow up with appropriate information related to this topic.\n    `,t.appendChild(o),document.body.appendChild(t),t.submit(),f(!1),b(!0)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-secondary-700 mb-1",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(n,{size:16,className:"text-secondary-400"})}),e.jsx("input",{type:"text",id:"name",name:"name",value:u.name,onChange:j,className:`block w-full pl-10 pr-3 py-2 border ${p.name?"border-red-500":"border-secondary-300"} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`,placeholder:"Your name"})]}),p.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-secondary-700 mb-1",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(a,{size:16,className:"text-secondary-400"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:u.email,onChange:j,className:`block w-full pl-10 pr-3 py-2 border ${p.email?"border-red-500":"border-secondary-300"} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`,placeholder:"you@example.com"})]}),p.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"industry",className:"block text-sm font-medium text-secondary-700 mb-1",children:"Industry"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(r,{size:16,className:"text-secondary-400"})}),e.jsx("select",{id:"industry",name:"industry",value:u.industry,onChange:j,className:`block w-full pl-10 pr-3 py-2 border ${p.industry?"border-red-500":"border-secondary-300"} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 appearance-none bg-none`,children:["Select your industry","Healthcare","Energy","Transportation","Technology","Telecommunications","Education","Financial Services","Real Estate","Manufacturing","Retail","Hospitality","Non-Profit","Government","Legal Services","Other"].map(((t,s)=>e.jsx("option",{value:0===s?"":t,disabled:0===s,children:t},s)))}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),p.industry&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.industry})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",disabled:y,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 "+(y?"opacity-75 cursor-not-allowed":""),children:y?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{size:16,className:"mr-2"}),"View Online ",d]})})}),e.jsxs("div",{className:"mt-4 text-xs text-center text-secondary-500",children:["By viewing this document, you agree to our"," ",e.jsx("a",{href:"/privacy",className:"text-primary-600 hover:text-primary-700",children:"Privacy Policy"})," ","and"," ",e.jsx("a",{href:"/terms",className:"text-primary-600 hover:text-primary-700",children:"Terms of Service"})]})]})]})]})})})};export{l as D};
