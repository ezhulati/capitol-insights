import{j as e}from"./motion-55a23653.js";import{r as t,f as s,L as r,R as o}from"./react-c3d7d9ee.js";import{S as a,f as l,h as i}from"./SEO-8193143e.js";import{a as n}from"./enhanced-seo-4a9491f0.js";import{B as c}from"./BreadcrumbNavigation-a76e09f9.js";import{u as d}from"./vendor-f90ff671.js";import{a as m,b as h,r as x}from"./content-provider-08b23d99.js";import"./ui-d40fa30f.js";import"./index-7ca087c8.js";const p=({src:s,alt:r,lowQualitySrc:o,placeholderColor:a="#f3f4f6",aspectRatio:l="16/9",objectFit:i="cover",className:n="",priority:c=!1,fetchPriority:m="auto",srcset:h,sizes:x,width:p,height:u,...g})=>{const[b,y]=t.useState(!1),[f,w]=t.useState(!1),{ref:v,inView:j}=d({triggerOnce:!0,rootMargin:"200px 0px",skip:c}),N=t.useRef(null),k=c&&"auto"===m?"high":m;t.useEffect((()=>{if(j&&N.current){const e=N.current;if(!e.complete){const t=()=>{y(!0)},s=()=>{w(!0),y(!0)};return e.addEventListener("load",t),e.addEventListener("error",s),()=>{e.removeEventListener("load",t),e.removeEventListener("error",s)}}y(!0)}}),[j]);const C={position:"relative",overflow:"hidden",backgroundColor:a,...p&&u?{width:"100%",maxWidth:`${p}px`,paddingBottom:u/p*100+"%"}:{aspectRatio:l}},L={width:"100%",height:"100%",objectFit:i,transition:"opacity 0.3s ease-in-out",opacity:b?1:0,position:"absolute",top:0,left:0};t.useEffect((()=>{if(c&&"undefined"!=typeof window){const e=document.createElement("link");return e.rel="preload",e.as="image",e.href=s,h&&e.setAttribute("imagesrcset",h),x&&e.setAttribute("imagesizes",x),document.head.appendChild(e),()=>{document.head.removeChild(e)}}}),[c,s,h,x]);const S=e=>{const t=e.split("."),s=t.pop();return["jpg","jpeg","png"].includes((null==s?void 0:s.toLowerCase())||"")?`${t.join(".")}.webp`:e};return e.jsxs("div",{ref:c?void 0:v,style:C,className:n,children:[(j||c)&&e.jsxs(e.Fragment,{children:[o&&!b&&e.jsx("img",{src:o,alt:"",style:{...L,opacity:1,filter:"blur(10px)"},"aria-hidden":"true",width:p,height:u}),e.jsxs("picture",{children:[e.jsx("source",{srcSet:h?h.split(", ").map((e=>{const[t,s]=e.split(" ");return`${S(t)} ${s}`})).join(", "):S(s),type:"image/webp",sizes:x}),e.jsx("source",{srcSet:h,sizes:x}),e.jsx("img",{ref:N,src:s,alt:r,style:L,loading:c?"eager":"lazy",fetchPriority:k,width:p,height:u,decoding:c?"sync":"async",onLoad:()=>y(!0),onError:()=>{w(!0),y(!0)},...g})]})]}),f&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:e.jsx("span",{className:"text-slate-400 text-sm",children:"Image unavailable"})})]})},u=()=>{const{slug:d}=s(),[u,g]=t.useState(null),[b,y]=t.useState(!0),[f,w]=t.useState(null),[v,j]=t.useState([]),[N,k]=t.useState(""),[C,L]=t.useState(0),[S,E]=t.useState([]),[z,$]=t.useState(!1),R=t.useRef(null),I=t.useRef({}),T=t.useRef(null);t.useEffect((()=>{const e=()=>{if(R.current){const e=R.current.clientHeight,s=window.innerHeight,r=window.scrollY,o=e-s,a=Math.min(100,Math.round(r/o*100));L(a),t()}},t=()=>{var e;if(0===Object.keys(I.current).length)return;const t=Object.entries(I.current).map((([e,t])=>({id:e,top:t.getBoundingClientRect().top}))),s=t.filter((e=>e.top<=100)).sort(((e,t)=>t.top-e.top))[0];k(s?s.id:(null==(e=t[0])?void 0:e.id)||"")};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);const q=v.filter((e=>["h1","h2","h3"].includes(e.type))).map((e=>({id:e.id,type:e.type,content:e.content})));t.useEffect((()=>{!async function(){if(!d)return w("Post not found"),void y(!1);try{const t=await m(d);if(!t)return w("Post not found"),void y(!1);if(g(t),t.category){const e=await h(t.category,d);E(e.slice(0,3))}try{const e=x(t.body);if(e instanceof Promise){const t=await e;j(t)}else j(e)}catch(e){j([{type:"p",content:"Error loading content",key:0}])}y(!1)}catch(t){w("Error loading post"),y(!1)}}()}),[d]);const M=e=>{const t=window.location.href,s=(null==u?void 0:u.title)||"Capitol Insights Article";switch(e){case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}&url=${encodeURIComponent(t)}`,"_blank");break;case"linkedin":window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}`,"_blank");break;case"email":window.open(`mailto:?subject=${encodeURIComponent(s)}&body=${encodeURIComponent(t)}`,"_blank");break;case"copy":navigator.clipboard.writeText(t).then((()=>{alert("Link copied to clipboard!")}))}$(!1)};if(b)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white text-navy-800",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-navy-800 border-t-gold-500 rounded-full animate-spin mb-4"}),e.jsx("div",{className:"text-xl font-medium",children:"Loading article..."})]})});if(f||!u)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white text-navy-800",children:e.jsxs("div",{className:"text-2xl text-gray-700 max-w-md text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Article Not Found"}),e.jsx("p",{className:"mb-6",children:f||"We couldn't find the article you were looking for."}),e.jsx(r,{to:"/updates",className:"inline-block bg-gold-500 hover:bg-gold-600 text-white font-medium py-2 px-6 rounded-lg transition-colors",children:"View All Articles"})]})});const B=new Date(u.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return u.image&&u.image.includes("cloudinary.com"),e.jsxs(e.Fragment,{children:[e.jsx(a,{...n({title:u.title,slug:d||"",excerpt:u.excerpt,metaDescription:u.metaDescription,metaTitle:u.metaTitle,metaKeywords:u.metaKeywords,author:u.author,date:u.date,image:u.image}),structuredData:l({title:u.title,slug:d||"",description:u.metaDescription||u.excerpt||"",date:u.date,image:u.image,author:u.author,authorTitle:"Senior Partner",category:u.category,tags:u.metaKeywords,readTime:u.readTime}),breadcrumbs:[{name:"Home",url:"https://capitol-insights.com/"},{name:"Policy Updates",url:"https://capitol-insights.com/updates"},{name:u.title,url:`https://capitol-insights.com/updates/${d}`}],includeOrganizationData:!0,socialPreview:i({title:u.title,description:u.metaDescription||u.excerpt||"",slug:d||"",publishDate:new Date(u.date).toISOString(),author:u.author,category:u.category,image:u.image,tags:u.metaKeywords})}),e.jsx("div",{className:"fixed top-0 left-0 z-50 h-2 bg-gold-500 transition-all duration-300 ease-out",style:{width:`${C}%`}}),e.jsxs("main",{className:"pt-24 pb-20 bg-white",ref:R,children:[e.jsx("div",{className:"bg-slate-50 border-b border-slate-200 py-3 mb-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-5 sm:px-8",children:e.jsx(c,{items:[{name:"Home",path:"/"},{name:"Policy Updates",path:"/updates"},{name:u.title,path:`/updates/${d}`,isLast:!0}]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-5 sm:px-8 lg:grid lg:grid-cols-12 lg:gap-12",children:[e.jsxs("article",{className:"lg:col-span-8 xl:col-span-9 mb-12 lg:mb-0",children:[e.jsxs("header",{className:"mb-14",children:[u.category&&e.jsx("div",{className:"mb-6",children:e.jsx("span",{className:"inline-block bg-navy-100 text-navy-800 font-medium text-sm px-4 py-1.5 rounded-full shadow-sm",children:u.category})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-8 text-gray-900 leading-tight tracking-tight",children:u.title}),e.jsxs("div",{className:"flex flex-wrap items-center text-gray-600 mb-10 gap-4 sm:gap-0",children:[e.jsxs("div",{className:"flex items-center flex-shrink-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mr-4 shadow-sm",children:e.jsx(p,{src:`/uploads/team/${u.author.replace(/ /g,"-").toLowerCase()}.jpg`,alt:u.author,className:"w-full h-full object-cover",placeholderColor:"#e5e7eb"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-navy-800 text-base",children:u.author}),e.jsxs("div",{className:"text-sm flex items-center mt-1",children:[e.jsx("time",{dateTime:u.date,className:"text-gray-500",children:B}),e.jsx("span",{className:"mx-2 text-gray-400",children:"â€¢"}),e.jsx("span",{className:"text-gray-500",children:u.readTime})]})]})]}),e.jsxs("div",{className:"ml-auto relative",children:[e.jsxs("button",{onClick:()=>$(!z),className:"flex items-center text-navy-600 hover:text-navy-800 font-medium bg-gray-50 px-4 py-2 rounded-md shadow-sm transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]}),z&&e.jsxs("div",{className:"absolute right-0 mt-3 w-56 bg-white rounded-lg shadow-xl z-10 py-2 border border-gray-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>M("twitter"),className:"flex items-center w-full px-5 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-blue-400",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})}),"Twitter"]}),e.jsxs("button",{onClick:()=>M("linkedin"),className:"flex items-center w-full px-5 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-blue-700",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})}),"LinkedIn"]}),e.jsxs("button",{onClick:()=>M("email"),className:"flex items-center w-full px-5 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),e.jsxs("button",{onClick:()=>M("copy"),className:"flex items-center w-full px-5 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-gray-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy Link"]})]})]})]}),u.image&&e.jsx("div",{className:"mt-8 mb-12 overflow-hidden rounded-xl shadow-xl",children:e.jsx("img",{src:u.image,alt:u.title,className:"w-full h-auto object-cover",onError:e=>{const t=e.currentTarget;t.onerror=null,t.src="/images/texas-capitol.jpg"}})}),u.excerpt&&e.jsx("div",{className:"text-xl text-gray-700 font-medium mb-10 leading-relaxed border-l-4 border-gold-500 pl-6 py-2 italic bg-gray-50 rounded-r-lg shadow-sm",children:u.excerpt})]}),e.jsx("div",{className:"prose prose-lg max-w-none prose-headings:font-display prose-headings:font-bold prose-h1:text-3xl prose-h2:text-2xl prose-h2:text-navy-900 prose-h2:mt-12 prose-h2:mb-6 prose-h3:text-xl prose-h3:text-navy-800 prose-h3:mt-10 prose-h3:mb-5 prose-p:text-slate-700 prose-p:leading-relaxed prose-p:mb-8 prose-li:text-slate-700 prose-li:mb-3 prose-a:text-gold-600 prose-a:no-underline hover:prose-a:text-gold-700 prose-blockquote:border-l-4 prose-blockquote:border-gold-400 prose-blockquote:pl-6 prose-blockquote:py-3 prose-blockquote:my-8 prose-blockquote:italic prose-blockquote:bg-gray-50 prose-blockquote:rounded-r-lg prose-strong:font-bold prose-strong:text-navy-800",children:v.map((t=>["h1","h2","h3"].includes(t.type)?o.createElement(t.type,{key:t.key,id:t.id,ref:e=>{e&&(I.current[t.id]=e)}},t.content):"ul"===t.type?e.jsx("ul",{className:"list-disc pl-8 mb-8 space-y-3",children:t.items.map(((t,s)=>e.jsx("li",{className:"mb-2",children:t},s)))},t.key):"ol"===t.type?e.jsx("ol",{className:"list-decimal pl-8 mb-8 space-y-3",children:t.items.map(((t,s)=>e.jsx("li",{className:"mb-2",children:t},s)))},t.key):"blockquote"===t.type?e.jsx("blockquote",{className:"border-l-4 border-gold-400 pl-6 py-3 my-8 italic text-gray-700 bg-gray-50 rounded-r-lg",children:t.content},t.key):"img"===t.type?e.jsx("img",{src:t.src,alt:t.alt||"Article image",className:"w-full h-auto rounded-lg shadow-md my-8"},t.key):e.jsx("p",{className:"mb-8 leading-relaxed text-slate-700",children:t.content},t.key)))}),S.length>0&&e.jsxs("div",{className:"mt-20 border-t border-gray-200 pt-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-10 text-navy-800",children:"Related Articles"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:S.map((t=>e.jsxs(r,{to:`/updates/${t.slug||t._sys.basename}`,className:"group block overflow-hidden rounded-xl shadow-md hover:shadow-xl transition-all duration-300",children:[t.image&&e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx(p,{src:t.image,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs("div",{className:"p-6",children:[t.category&&e.jsx("span",{className:"inline-block text-sm font-medium text-gold-600 mb-3 bg-gold-50 px-3 py-1 rounded-full",children:t.category}),e.jsx("h3",{className:"font-bold text-lg mb-3 group-hover:text-gold-600 transition-colors leading-tight",children:t.title}),e.jsx("p",{className:"text-gray-600 text-base line-clamp-2 leading-relaxed",children:t.excerpt})]})]},t.slug||t._sys.basename)))})]})]}),e.jsx("aside",{className:"hidden lg:block lg:col-span-4 xl:col-span-3",children:e.jsxs("div",{className:"sticky top-28",ref:T,children:[q.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 mb-10 shadow-sm",children:[e.jsx("h2",{className:"font-bold text-xl mb-6 text-navy-900",children:"Table of Contents"}),e.jsx("nav",{children:e.jsx("ul",{className:"space-y-3",children:q.map((t=>e.jsx("li",{className:`\n                          ${"h1"===t.type?"":"h2"===t.type?"ml-5":"ml-10"}\n                          ${N===t.id?"text-gold-600 font-medium border-l-2 border-gold-500 pl-3 -ml-[2px]":"text-gray-700"}\n                        `,children:e.jsx("button",{onClick:()=>(e=>{const t=document.getElementById(e);t&&window.scrollTo({top:t.offsetTop-80,behavior:"smooth"})})(t.id),className:"hover:text-gold-700 text-left w-full transition-colors py-1.5 block",children:t.content})},t.id)))})})]}),e.jsxs("div",{className:"bg-navy-800 rounded-xl p-8 shadow-md",children:[e.jsx("h3",{className:"font-bold text-xl mb-4 text-white",children:"Stay Informed"}),e.jsx("p",{className:"text-gray-200 mb-6 text-base leading-relaxed",children:"Get the latest Capitol Insights delivered to your inbox."}),e.jsxs("form",{className:"space-y-4",children:[e.jsx("input",{type:"email",placeholder:"Your email address",className:"w-full px-4 py-3 text-navy-800 bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-gold-500 shadow-sm",required:!0}),e.jsx("button",{type:"submit",className:"w-full bg-gold-500 hover:bg-gold-600 text-white font-medium py-3 px-4 rounded-lg transition-colors duration-300",children:"Subscribe"})]})]})]})})]})]})]})};export{u as default};
